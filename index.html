<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculadora profesional para determinar precios de proyectos de impresi贸n 3D con costos de material, tiempo, electricidad y m谩s, por GoldTech MX">
    <meta name="keywords" content="cotizador 3d, calculadora impresion 3d, precios pla abs petg, goldtech mx, forge3d">
    <meta name="author" content="GoldTech MX">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="Cotizador Forge3D - Calculadora Profesional de Precios para Impresi贸n 3D">
    <meta property="og:description" content="Herramienta profesional gratuita para calcular precios exactos de proyectos de impresi贸n 3D con costos de material, tiempo, electricidad y m谩s">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gtt.mx/forge3d">
    <meta property="og:image" content="https://bio.goldtech.mx/forge3d_og">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Cotizador Forge3D - Calculadora Profesional de Precios para Impresi贸n 3D">
    <meta name="twitter:description" content="Herramienta profesional gratuita para calcular precios exactos de proyectos de impresi贸n 3D">
    <meta name="twitter:image" content="https://bio.goldtech.mx/forge3d_og">
    <meta name="twitter:site" content="@goldtechmx">

    <!-- Favicon mejorado -->
    <link rel="icon" type="image/x-icon" href="https://bio.goldtech.mx/forge3d-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://bio.goldtech.mx/forge3d-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="https://bio.goldtech.mx/forge3d-icon">
    <link rel="icon" type="image/png" sizes="16x16" href="https://bio.goldtech.mx/forge3d-icon">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://gtt.mx/forge3d">

    <!-- Preload recursos cr铆ticos -->
    <link rel="preload" href="./assets/css/styles.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://bio.goldtech.mx/forge3d_oscuro" as="image">

    <!-- DNS Prefetch para recursos externos -->
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//bio.goldtech.mx">

    <!-- Hojas de estilo -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./assets/css/styles.css">

    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#CD9430">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <title>Cotizador Forge3D - Calculadora Profesional de Precios para Impresi贸n 3D</title>

    <!-- Schema.org mejorado -->
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "WebApplication",
          "name": "Cotizador Forge3D",
          "description": "Calculadora profesional para determinar precios de proyectos de impresi贸n 3D con costos de material, tiempo, electricidad y m谩s, por GoldTech MX",
          "url": "https://gtt.mx/forge3d",
          "applicationCategory": "BusinessApplication",
          "operatingSystem": "Web",
          "browserRequirements": "Requiere JavaScript habilitado",
          "softwareVersion": "2.1",
          "datePublished": "2024-01-01",
          "dateModified": "2025-08-20",
          "inLanguage": "es-MX",
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "MXN",
            "availability": "https://schema.org/InStock"
          },
          "creator": {
            "@type": "Organization",
            "name": "GoldTech MX",
            "url": "https://goldtech.mx",
            "logo": "https://bio.goldtech.mx/logogoldtech",
            "email": "github@goldtech.mx",
            "telephone": "+52-477-175-6028",
            "contactPoint": {
              "@type": "ContactPoint",
              "telephone": "+52-477-175-6028",
              "contactType": "WhatsApp",
              "availableLanguage": "Spanish"
            },
            "sameAs": [
              "https://instagram.com/goldtechmx",
              "https://tiktok.com/@goldtechmx",
              "https://youtube.com/@goldtechmx",
              "https://linkedin.com/company/goldtechmx",
              "https://facebook.com/goldtechmx"
            ]
          },
          "potentialAction": {
            "@type": "UseAction",
            "target": "https://gtt.mx/forge3d"
          }
        }
    </script>
</head>

<body>
    <!-- Loader inicial -->
    <div id="loader" class="loader">
        <div class="loader-content">
            <img src="https://bio.goldtech.mx/forge3d_oscuro" alt="Forge3D" class="loader-logo">
            <div class="loader-spinner"></div>
            <p>Cargando Forge3D...</p>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <img id="forge-logo" src="https://bio.goldtech.mx/forge3d_oscuro" alt="Forge3D Logo" class="logo forge-logo">
                    <div class="app-info">
                        <h1 id="app-name">Cotizador Forge3D</h1>
                        <p id="app-subtitle">Calculadora Profesional de Precios</p>
                    </div>
                </div>

                <div class="header-controls">
                    <button class="control-btn" onclick="createSupportEmail()" title="Email de Soporte">
                         Soporte
                    </button>

                    <button class="control-btn" onclick="createContactEmail()" title="Email de Contacto">
                         Contacto
                    </button>

                    <button class="control-btn theme-toggle" onclick="toggleTheme()" title="Cambiar Tema (Ctrl+T)">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>

                    <button class="control-btn config-toggle" onclick="toggleSidebar()" title="Configuraci贸n (Ctrl+K)">
                        <i class="fas fa-cog"></i>
                    </button>

                    <button class="control-btn branding-toggle" onclick="BrandingUI.open()" title="Configurar Branding (Ctrl+B)">
                        <i class="fas fa-palette"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Contenido principal -->
        <main class="main-content">
            <div class="calculator-container">
                <!-- Formulario principal -->
                <div class="calculator-form">
                    <h2> Datos de la Pieza</h2>

                    <form id="pieceForm" onsubmit="return false;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombrePieza">
                                    <i class="fas fa-tag"></i> Nombre de la pieza *
                                </label>
                                <input type="text" id="nombrePieza" placeholder="Ej: Engranaje personalizado" required>
                            </div>

                            <div class="form-group">
                                <label for="cantidad">
                                    <i class="fas fa-clone"></i> Cantidad *
                                </label>
                                <input type="number" id="cantidad" min="1" value="1" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="horas">
                                    <i class="fas fa-clock"></i> Tiempo de impresi贸n *
                                </label>
                                <div class="time-inputs">
                                    <input type="number" id="horas" min="0" max="999" placeholder="H" title="Horas">
                                    <span>:</span>
                                    <input type="number" id="minutos" min="0" max="59" placeholder="M" title="Minutos">
                                    <span>:</span>
                                    <input type="number" id="segundos" min="0" max="59" placeholder="S" title="Segundos">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="unidadMaterial">
                                    <i class="fas fa-ruler"></i> Unidad de material
                                </label>
                                <select id="unidadMaterial" onchange="updateMaterialLabel()">
                                    <option value="metros">Metros de filamento</option>
                                    <option value="gramos">Gramos de material</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="cantidadMaterial">
                                    <i class="fas fa-weight-hanging"></i> <span id="materialLabel">Metros de filamento *</span>
                                </label>
                                <input type="number" id="cantidadMaterial" step="0.01" min="0" placeholder="Ej: 15.5" required>
                            </div>

                            <div class="form-group">
                                <label for="tipoFilamento">
                                    <i class="fas fa-industry"></i> Tipo de filamento *
                                </label>
                                <select id="tipoFilamento" required>
                                    <option value="">Seleccionar material</option>
                                    <option value="PLA">PLA (1.24 g/cm鲁)</option>
                                    <option value="ABS">ABS (1.04 g/cm鲁)</option>
                                    <option value="PETG">PETG (1.27 g/cm鲁)</option>
                                    <option value="TPU">TPU (1.20 g/cm鲁)</option>
                                    <option value="ASA">ASA (1.05 g/cm鲁)</option>
                                    <option value="HIPS">HIPS (1.04 g/cm鲁)</option>
                                    <option value="PC">PC - Policarbonato (1.20 g/cm鲁)</option>
                                    <option value="NYLON">Nylon (1.14 g/cm鲁)</option>
                                    <option value="WOOD">Filamento de Madera (1.28 g/cm鲁)</option>
                                    <option value="CARBON">Fibra de Carbono (1.30 g/cm鲁)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="impresora">
                                    <i class="fas fa-print"></i> Modelo de impresora *
                                </label>
                                <select id="impresora" required>
                                    <option value="">Seleccionar impresora</option>
                                    <option value="ENDER3">Creality Ender 3 (220W)</option>
                                    <option value="ENDER3V2">Creality Ender 3 V2 (230W)</option>
                                    <option value="ENDER5">Creality Ender 5 (220W)</option>
                                    <option value="CR10">Creality CR-10 (300W)</option>
                                    <option value="PRUSA_I3">Prusa i3 MK3S+ (120W)</option>
                                    <option value="PRUSA_MINI">Prusa MINI+ (120W)</option>
                                    <option value="BAMBU_A1">Bambu Lab A1 (350W)</option>
                                    <option value="BAMBU_X1">Bambu Lab X1 Carbon (350W)</option>
                                    <option value="ULTIMAKER_S3">Ultimaker S3 (215W)</option>
                                    <option value="ULTIMAKER_S5">Ultimaker S5 (500W)</option>
                                    <option value="FORMLABS_3">Formlabs Form 3 (65W)</option>
                                    <option value="ANYCUBIC_MEGA">Anycubic i3 Mega (270W)</option>
                                    <option value="GENERIC_FDM">Impresora FDM Gen茅rica (250W)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="costoCarrete">
                                    <i class="fas fa-dollar-sign"></i> Costo del carrete (MXN) *
                                </label>
                                <input type="number" id="costoCarrete" step="0.01" min="0" placeholder="Ej: 450.00" required>
                            </div>
                        </div>

                        <!-- Marketplace opcional -->
                        <div class="form-row marketplace-section">
                            <div class="form-group">
                                <label for="marketplace">
                                    <i class="fas fa-store"></i> Marketplace (opcional)
                                </label>
                                <select id="marketplace">
                                    <option value="">Sin marketplace</option>
                                    <option value="MERCADOLIBRE">MercadoLibre (13-17%)</option>
                                    <option value="AMAZON">Amazon (8-15%)</option>
                                    <option value="ETSY">Etsy (6.5%)</option>
                                    <option value="FACEBOOK">Facebook Marketplace (5%)</option>
                                    <option value="CUSTOM">Personalizado</option>
                                </select>
                            </div>

                            <div class="form-group" id="comisionPersonalizadaGroup" style="display: none;">
                                <label for="comisionPersonalizada">
                                    <i class="fas fa-percentage"></i> Comisi贸n personalizada (%)
                                </label>
                                <input type="number" id="comisionPersonalizada" step="0.1" min="0" max="50" placeholder="Ej: 10.5">
                            </div>
                        </div>

                        <!-- Botones de acci贸n -->
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="clearForm()" title="Limpiar formulario (Ctrl+L)">
                                <i class="fas fa-eraser"></i> Limpiar
                            </button>

                            <button type="button" class="btn-primary" onclick="addPiece()" title="Agregar pieza (Ctrl+Enter)">
                                <i class="fas fa-plus"></i> Agregar Pieza
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Resultados -->
                <div class="results-container" id="tablaResultados" style="display: none;">
                    <div class="results-header">
                        <h2> Resumen de Cotizaci贸n</h2>
                        <div class="results-actions">
                            <button class="btn-info" onclick="showQuotePreview()" title="Vista previa">
                                <i class="fas fa-eye"></i> Vista Previa
                            </button>
                            <button class="btn-success" onclick="generatePDF()" title="Generar PDF (Ctrl+P)">
                                <i class="fas fa-file-pdf"></i> Generar PDF
                            </button>
                            <button class="btn-warning" onclick="clearAllPieces()" title="Limpiar todo">
                                <i class="fas fa-trash"></i> Limpiar Todo
                            </button>
                        </div>
                    </div>

                    <div class="pieces-table-container">
                        <table class="pieces-table">
                            <thead>
                                <tr>
                                    <th>Pieza</th>
                                    <th>Cantidad</th>
                                    <th>Material</th>
                                    <th>Tiempo</th>
                                    <th>Precio Unit.</th>
                                    <th>Total</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tablaPiezas">
                                <!-- Las piezas se cargan din谩micamente aqu铆 -->
                            </tbody>
                        </table>
                    </div>

                    <div class="totals-summary">
                        <div class="totals-grid">
                            <div class="total-item">
                                <span class="total-label">Subtotal:</span>
                                <span class="total-value" id="subtotalFinal">$0.00</span>
                            </div>
                            <div class="total-item">
                                <span class="total-label">Comisi贸n Marketplace:</span>
                                <span class="total-value" id="comisionTotal">$0.00</span>
                            </div>
                            <div class="total-item total-main">
                                <span class="total-label">Total Final:</span>
                                <span class="total-value" id="totalFinal">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Sidebar de configuraci贸n -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-cog"></i> Configuraci贸n</h3>
                <button class="sidebar-close" onclick="toggleSidebar()"></button>
            </div>

            <div class="sidebar-content">
                <div class="config-tabs">
                    <button class="config-tab active" onclick="switchConfigTab('general')">锔 General</button>
                    <button class="config-tab" onclick="switchConfigTab('advanced')"> Avanzado</button>
                    <button class="config-tab" onclick="switchConfigTab('backup')"> Backup</button>
                </div>

                <!-- Tab General -->
                <div id="configGeneral" class="config-section active">
                    <h4> Configuraci贸n de Costos</h4>

                    <div class="config-group">
                        <label for="tarifaElectrica">
                            <i class="fas fa-bolt"></i> Tarifa el茅ctrica (MXN/kWh):
                        </label>
                        <input type="number" id="tarifaElectrica" step="0.01" min="0">
                        <small>Costo de electricidad por kilovatio-hora</small>
                    </div>

                    <div class="config-group">
                        <label for="tarifaHora">
                            <i class="fas fa-clock"></i> Tarifa por hora (MXN):
                        </label>
                        <input type="number" id="tarifaHora" step="0.01" min="0">
                        <small>Valor de tu trabajo por hora</small>
                    </div>

                    <div class="config-group">
                        <label for="porcentajeUtilidad">
                            <i class="fas fa-percentage"></i> Porcentaje de utilidad (%):
                        </label>
                        <input type="number" id="porcentajeUtilidad" step="0.1" min="0" max="100">
                        <small>Margen de ganancia sobre costos</small>
                    </div>

                    <div class="config-group">
                        <label for="desgasteMaquina">
                            <i class="fas fa-tools"></i> Desgaste de m谩quina (MXN/h):
                        </label>
                        <input type="number" id="desgasteMaquina" step="0.01" min="0">
                        <small>Costo de mantenimiento por hora de uso</small>
                    </div>

                    <div class="config-group">
                        <label for="desgasteCarrete">
                            <i class="fas fa-recycle"></i> Desgaste de carrete (%):
                        </label>
                        <input type="number" id="desgasteCarrete" step="0.1" min="0" max="100">
                        <small>Porcentaje de desperdicio de material</small>
                    </div>
                </div>

                <!-- Tab Avanzado -->
                <div id="configAdvanced" class="config-section">
                    <h4> Configuraci贸n Avanzada</h4>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableNotifications">
                            Habilitar notificaciones
                        </label>
                    </div>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableAutoSave">
                            Guardado autom谩tico
                        </label>
                    </div>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableDebugMode">
                            Modo depuraci贸n
                        </label>
                    </div>

                    <div class="config-group">
                        <label for="defaultCurrency">
                            <i class="fas fa-money-bill"></i> Moneda por defecto:
                        </label>
                        <select id="defaultCurrency">
                            <option value="MXN">MXN - Peso Mexicano</option>
                            <option value="USD">USD - D贸lar Americano</option>
                            <option value="EUR">EUR - Euro</option>
                        </select>
                    </div>

                    <div class="config-group">
                        <label for="decimalPlaces">
                            <i class="fas fa-calculator"></i> Decimales en precios:
                        </label>
                        <select id="decimalPlaces">
                            <option value="0">0 decimales</option>
                            <option value="1">1 decimal</option>
                            <option value="2">2 decimales</option>
                        </select>
                    </div>
                </div>

                <!-- Tab Backup -->
                <div id="configBackup" class="config-section">
                    <h4> Backup y Restauraci贸n</h4>

                    <div class="config-group">
                        <button class="btn-secondary full-width" onclick="exportConfiguration()">
                            <i class="fas fa-download"></i> Exportar Configuraci贸n
                        </button>
                        <small>Descargar configuraci贸n actual</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-secondary full-width" onclick="document.getElementById('importConfig').click()">
                            <i class="fas fa-upload"></i> Importar Configuraci贸n
                        </button>
                        <input type="file" id="importConfig" accept=".json" style="display: none" onchange="importConfiguration(this)">
                        <small>Cargar configuraci贸n desde archivo</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-warning full-width" onclick="resetToDefaults()">
                            <i class="fas fa-redo"></i> Restaurar Valores por Defecto
                        </button>
                        <small>Volver a la configuraci贸n original</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-info full-width" onclick="clearAllData()">
                            <i class="fas fa-trash-alt"></i> Limpiar Todos los Datos
                        </button>
                        <small>Eliminar toda la configuraci贸n guardada</small>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="btn-primary full-width" onclick="saveConfiguration()">
                    <i class="fas fa-save"></i> Guardar Configuraci贸n
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p id="welcome-message"> No se incluye costo de entrega y/o env铆o. Los precios son 煤nicamente por las piezas impresas.</p>
                <p> Todos los precios est谩n expresados en pesos mexicanos y no incluyen IVA.</p>
                <div class="footer-brand branding-footer">
                    <a href="https://goldtech.mx" target="_blank" class="company-website">
                        <img id="company-footer-logo" src="https://bio.goldtech.mx/logogoldtech" alt="GoldTech MX Logo" loading="lazy" class="company-logo">
                    </a>
                </div>
                <div class="social-icons">
                    <!-- Los enlaces se cargan din谩micamente desde branding -->
                </div>
                <p id="footer-text" class="footer-text">Desarrollado con わ por GoldTech MX</p>
            </div>
        </footer>
    </div>

    <!-- Overlay para modales -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;"></div>

    <!-- Notificaciones -->
    <div id="notifications-container" class="notifications-container"></div>

    <!-- Scripts principales -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="./assets/js/branding_config.js"></script>
    <script src="./assets/js/whatsapp_floating.js"></script>
    <script src="./assets/js/email_templates.js"></script>
    <script src="./assets/js/branding_ui.js"></script>
    <script src="./assets/js/app.js"></script>

    <!-- Service Worker para PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('SW registrado: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registro fall贸: ', registrationError);
                    });
            });
        }
    </script>

    <!-- Script de inicializaci贸n -->
    <script>
        // Inicializaci贸n de la aplicaci贸n
        document.addEventListener('DOMContentLoaded', function () {
            // Ocultar loader
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.style.display = 'none';
                }
            }, 1000);

            // Inicializar configuraci贸n
            loadConfiguration();

            // Detectar tema del sistema
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-theme');
                updateThemeIcon();
            }

            // Escuchar cambios de tema del sistema
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!localStorage.getItem('theme-preference')) {
                    document.body.classList.toggle('dark-theme', e.matches);
                    updateThemeIcon();
                }
            });

            // Configurar marketplace
            document.getElementById('marketplace').addEventListener('change', function () {
                const customGroup = document.getElementById('comisionPersonalizadaGroup');
                if (this.value === 'CUSTOM') {
                    customGroup.style.display = 'block';
                } else {
                    customGroup.style.display = 'none';
                }
            });

            console.log(' Forge3D Cotizador v2.1 inicializado correctamente');
        });

        // Funciones globales para compatibilidad
        function updateMaterialLabel() {
            const unidad = document.getElementById('unidadMaterial').value;
            const label = document.getElementById('materialLabel');
            label.textContent = unidad === 'metros' ? 'Metros de filamento *' : 'Gramos de material *';
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme-preference', isDark ? 'dark' : 'light');
            updateThemeIcon();

            // Actualizar logos seg煤n el tema
            if (typeof brandingManager !== 'undefined') {
                brandingManager.updateLogos();
            }
        }

        function updateThemeIcon() {
            const icon = document.getElementById('theme-icon');
            const isDark = document.body.classList.contains('dark-theme');
            icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        function switchConfigTab(tabName) {
            // Remover active de todos los tabs
            document.querySelectorAll('.config-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.config-section').forEach(section => section.classList.remove('active'));

            // Activar tab seleccionado
            document.querySelector(`[onclick="switchConfigTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`config${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
        }

        // Atajos de teclado
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                addPiece();
            }
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                clearForm();
            }
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                if (document.getElementById('tablaResultados').style.display !== 'none') {
                    generatePDF();
                }
            }
            if (e.ctrlKey && e.key === 't') {
                e.preventDefault();
                toggleTheme();
            }
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                toggleSidebar();
            }
            if (e.ctrlKey && e.key === 'b') {
                e.preventDefault();
                BrandingUI.open();
            }
            if (e.key === 'Escape') {
                // Cerrar modales abiertos
                if (document.getElementById('sidebar').classList.contains('open')) {
                    toggleSidebar();
                }
                if (brandingUI && brandingUI.isOpen) {
                    BrandingUI.close();
                }
                // Cerrar modal de email si est谩 abierto
                const emailModal = document.querySelector('.email-modal');
                if (emailModal) {
                    closeEmailModal();
                }
            }
        });
    </script>
</body>
</html>