<!DOCTYPE html>
<html lang="es">
<head>
<<<<<<< HEAD
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Optimizado -->
    <title>Cotizador Forge3D - Calculadora Profesional de Precios para Impresión 3D | GoldTech MX</title>
    <meta name="description" content="Herramienta profesional gratuita para calcular precios exactos de proyectos de impresión 3D. Incluye costos de material PLA, ABS, PETG, tiempo, electricidad y más. Cotizador oficial de GoldTech MX." />
    <meta name="keywords" content="cotizador impresión 3D México, calculadora precios 3D, Forge3D, GoldTech MX, PLA ABS PETG, presupuesto impresión 3D, cotización impresión 3D, calculadora filamento 3D, precios impresión 3D México" />
    <meta name="author" content="GoldTech MX" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="Spanish" />
    <meta name="geo.region" content="MX" />
    <meta name="geo.country" content="México" />

    <!-- Open Graph para redes sociales -->
    <meta property="og:title" content="Cotizador Forge3D - Calculadora Profesional de Impresión 3D" />
    <meta property="og:description" content="Herramienta gratuita para calcular precios exactos de proyectos de impresión 3D. Incluye todos los costos: material, tiempo, electricidad y más." />
    <meta property="og:image" content="https://bio.goldtech.mx/forge3d_og" />
    <meta property="og:url" content="https://gtt.mx/forge3d" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="GoldTech MX" />
    <meta property="og:locale" content="es_MX" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Cotizador Forge3D - Calculadora de Impresión 3D" />
    <meta name="twitter:description" content="Calcula precios exactos para tus proyectos de impresión 3D de forma profesional y gratuita." />
    <meta name="twitter:image" content="https://bio.goldtech.mx/forge3d_og" />
    <meta name="twitter:site" content="@goldtechmx" />

    <!-- Favicon mejorado -->
    <link rel="icon" type="image/x-icon" href="https://bio.goldtech.mx/forge3d-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://bio.goldtech.mx/forge3d-icon" />
=======
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculadora profesional para determinar precios de proyectos de impresión 3D con costos de material, tiempo, electricidad y más, por GoldTech MX">
    <meta name="keywords" content="cotizador 3d, calculadora impresion 3d, precios pla abs petg, goldtech mx, forge3d">
    <meta name="author" content="GoldTech MX">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="Cotizador Forge3D - Calculadora Profesional de Precios para Impresión 3D">
    <meta property="og:description" content="Herramienta profesional gratuita para calcular precios exactos de proyectos de impresión 3D con costos de material, tiempo, electricidad y más">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gtt.mx/forge3d">
    <meta property="og:image" content="https://bio.goldtech.mx/forge3d_og">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Cotizador Forge3D - Calculadora Profesional de Precios para Impresión 3D">
    <meta name="twitter:description" content="Herramienta profesional gratuita para calcular precios exactos de proyectos de impresión 3D">
    <meta name="twitter:image" content="https://bio.goldtech.mx/forge3d_og">
    <meta name="twitter:site" content="@goldtechmx">

    <!-- Favicon mejorado -->
    <link rel="icon" type="image/x-icon" href="https://bio.goldtech.mx/forge3d-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://bio.goldtech.mx/forge3d-icon">
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
    <link rel="icon" type="image/png" sizes="32x32" href="https://bio.goldtech.mx/forge3d-icon">
    <link rel="icon" type="image/png" sizes="16x16" href="https://bio.goldtech.mx/forge3d-icon">

    <!-- Canonical URL -->
<<<<<<< HEAD
    <link rel="canonical" href="https://gtt.mx/forge3d" />
=======
    <link rel="canonical" href="https://gtt.mx/forge3d">
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65

    <!-- Preload recursos críticos -->
    <link rel="preload" href="./assets/css/styles.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://bio.goldtech.mx/forge3d_oscuro" as="image">

    <!-- DNS Prefetch para recursos externos -->
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//bio.goldtech.mx">

    <!-- Hojas de estilo -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./assets/css/styles.css">

<<<<<<< HEAD
=======
    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#CD9430">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <title>Cotizador Forge3D - Calculadora Profesional de Precios para Impresión 3D</title>

>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
    <!-- Schema.org mejorado -->
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "WebApplication",
          "name": "Cotizador Forge3D",
<<<<<<< HEAD
          "description": "Calculadora profesional para determinar precios de proyectos de impresión 3D con costos de material, tiempo, electricidad y más, por Gold Tech Mx",
=======
          "description": "Calculadora profesional para determinar precios de proyectos de impresión 3D con costos de material, tiempo, electricidad y más, por GoldTech MX",
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
          "url": "https://gtt.mx/forge3d",
          "applicationCategory": "BusinessApplication",
          "operatingSystem": "Web",
          "browserRequirements": "Requiere JavaScript habilitado",
          "softwareVersion": "2.1",
          "datePublished": "2024-01-01",
          "dateModified": "2025-08-20",
          "inLanguage": "es-MX",
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "MXN",
            "availability": "https://schema.org/InStock"
          },
          "creator": {
            "@type": "Organization",
            "name": "GoldTech MX",
            "url": "https://goldtech.mx",
            "logo": "https://bio.goldtech.mx/logogoldtech",
<<<<<<< HEAD
            "contactPoint": {
              "@type": "ContactPoint",
              "contactType": "customer service",
=======
            "email": "github@goldtech.mx",
            "telephone": "+52-477-175-6028",
            "contactPoint": {
              "@type": "ContactPoint",
              "telephone": "+52-477-175-6028",
              "contactType": "WhatsApp",
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
              "availableLanguage": "Spanish"
            },
            "sameAs": [
              "https://instagram.com/goldtechmx",
              "https://tiktok.com/@goldtechmx",
              "https://youtube.com/@goldtechmx",
              "https://linkedin.com/company/goldtechmx",
              "https://facebook.com/goldtechmx"
            ]
          },
<<<<<<< HEAD
          "featureList": [
            "Cálculo automático de costos de material",
            "Estimación de tiempo de impresión",
            "Cálculo de costos eléctricos",
            "Múltiples tipos de filamento soportados",
            "Generación de PDF para cotizaciones",
            "Configuración personalizable"
          ]
=======
          "potentialAction": {
            "@type": "UseAction",
            "target": "https://gtt.mx/forge3d"
          }
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
        }
    </script>
</head>

<body>
<<<<<<< HEAD
    <div class="main-layout">
        <!-- Pestaña de configuración -->
        <button class="config-toggle-btn" onclick="toggleSidebar()" id="configToggleBtn">
            <i class="fas fa-cog"></i>
            <span>Configuración</span>
        </button>

        <!-- Overlay para cerrar sidebar -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

        <!-- Sidebar de Configuración -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-cog"></i> Configuración</h3>
                <div class="header-buttons">
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <i class="fas fa-adjust"></i>
                        <span id="theme-text">Claro</span>
                    </button>
                    <button class="close-config" onclick="closeSidebar()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Pestañas de configuración -->
            <div class="config-tabs">
                <button class="tab-btn active" onclick="switchConfigTab('cotizador')">
                    <i class="fas fa-calculator"></i> Cotizador
                </button>
                <button class="tab-btn" onclick="switchConfigTab('branding')">
                    <i class="fas fa-palette"></i> Branding
                </button>
            </div>

            <!-- Panel de configuración del cotizador -->
            <div class="config-panel active" id="panel-cotizador">
                <div class="config-grid">
                    <div class="config-group">
                        <div class="config-item">
                            <span class="tooltip-icon" data-tooltip="costo de electricidad por kwh impacta directamente el costo de operación de la impresora durante el tiempo de impresión">ℹ️</span>
                            <div style="flex: 1;">
                                <label for="tarifaLuz">Tarifa Eléctrica (MXN/kWh)</label>
                                <input type="number" id="tarifaLuz" value="2.8" step="0.1" min="0" onchange="guardarConfiguracion()" />
                                <div class="quick-options">
                                    <button onclick="aplicarValorRapido('tarifaLuz', 1.083)" class="quick-btn">CFE Básica (1.083)</button>
                                    <button onclick="aplicarValorRapido('tarifaLuz', 1.315)" class="quick-btn">CFE Intermedio (1.315)</button>
                                    <button onclick="aplicarValorRapido('tarifaLuz', 3.847)" class="quick-btn">CFE Alto (3.847)</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="config-group">
                        <div class="config-item">
                            <span class="tooltip-icon" data-tooltip="valor por hora de trabajo de impresión 3d incluye tiempo de preparación supervisión y postprocesado básico">ℹ️</span>
                            <div style="flex: 1;">
                                <label for="tarifaHora">Tarifa por Hora (MXN)</label>
                                <input type="number" id="tarifaHora" value="28" step="1" min="0" onchange="guardarConfiguracion()" />
                                <div class="quick-options">
                                    <button onclick="aplicarValorRapido('tarifaHora', 10)" class="quick-btn">Básico (10)</button>
                                    <button onclick="aplicarValorRapido('tarifaHora', 20)" class="quick-btn">Estándar (20)</button>
                                    <button onclick="aplicarValorRapido('tarifaHora', 30)" class="quick-btn">Premium (30)</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="config-group">
                        <div class="config-item">
                            <span class="tooltip-icon" data-tooltip="porcentaje de ganancia aplicado sobre el costo base es tu margen de utilidad antes de comisiones">ℹ️</span>
                            <div style="flex: 1;">
                                <label for="porcentajeUtilidad">Utilidad (%)</label>
                                <input type="number" id="porcentajeUtilidad" value="18" step="1" min="0" max="100" onchange="guardarConfiguracion()" />
                                <div class="quick-options">
                                    <button onclick="aplicarValorRapido('porcentajeUtilidad', 10)" class="quick-btn">Básica (10)</button>
                                    <button onclick="aplicarValorRapido('porcentajeUtilidad', 15)" class="quick-btn">Estándar (15)</button>
                                    <button onclick="aplicarValorRapido('porcentajeUtilidad', 20)" class="quick-btn">Premium (20)</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="config-group">
                        <div class="config-item">
                            <span class="tooltip-icon" data-tooltip="costo por hora de desgaste y mantenimiento de la impresora 3d incluye piezas de repuesto y mantenimiento">ℹ️</span>
                            <div style="flex: 1;">
                                <label for="desgasteMaquina">Desgaste Máquina (MXN/h)</label>
                                <input type="number" id="desgasteMaquina" value="12" step="1" min="0" onchange="guardarConfiguracion()" />
                                <div class="quick-options">
                                    <button onclick="aplicarValorRapido('desgasteMaquina', 8)" class="quick-btn">Básico (8)</button>
                                    <button onclick="aplicarValorRapido('desgasteMaquina', 12)" class="quick-btn">Estándar (12)</button>
                                    <button onclick="aplicarValorRapido('desgasteMaquina', 18)" class="quick-btn">Industrial (18)</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="config-group">
                        <div class="config-item">
                            <span class="tooltip-icon" data-tooltip="costo por cada 100g de filamento usado por desgaste del sistema de extrusión y hotend">ℹ️</span>
                            <div style="flex: 1;">
                                <label for="desgasteCarrete">Desgaste Carrete (MXN/100g)</label>
                                <input type="number" id="desgasteCarrete" value="8" step="0.1" min="0" onchange="guardarConfiguracion()" />
                                <div class="quick-options">
                                    <button onclick="aplicarValorRapido('desgasteCarrete', 5)" class="quick-btn">Bajo (5)</button>
                                    <button onclick="aplicarValorRapido('desgasteCarrete', 8)" class="quick-btn">Normal (8)</button>
                                    <button onclick="aplicarValorRapido('desgasteCarrete', 12)" class="quick-btn">Alto (12)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de configuración de branding -->
            <div class="config-panel" id="panel-branding">
                <div class="branding-grid">
                    <!-- Información de empresa -->
                    <div class="branding-group">
                        <h4><i class="fas fa-building"></i> Información de Empresa</h4>
                        <div class="branding-item">
                            <label for="brandingCompanyName">Nombre de la empresa</label>
                            <input type="text" id="brandingCompanyName" placeholder="Ej: Mi Empresa 3D" onchange="updateBranding()" />
                        </div>
                        <div class="branding-item">
                            <label for="brandingSlogan">Slogan</label>
                            <input type="text" id="brandingSlogan" placeholder="Ej: Soluciones de impresión 3D" onchange="updateBranding()" />
                        </div>
                        <div class="branding-item">
                            <label for="brandingWebsite">Sitio web</label>
                            <input type="url" id="brandingWebsite" placeholder="https://mi-empresa.com" onchange="updateBranding()" />
                        </div>
                        <div class="branding-item">
                            <label for="brandingEmail">Email</label>
                            <input type="email" id="brandingEmail" placeholder="contacto@mi-empresa.com" onchange="updateBranding()" />
                        </div>
                    </div>

                    <!-- Logos -->
                    <div class="branding-group">
                        <h4><i class="fas fa-image"></i> Logos</h4>
                        <div class="logo-upload-section">
                            <div class="logo-preview">
                                <img id="logoPreviewForge" src="" alt="Logo Forge3D" class="logo-preview-img">
                                <div class="logo-upload-overlay">
                                    <i class="fas fa-upload"></i>
                                    <span>Logo Forge3D</span>
                                </div>
                                <input type="file" id="logoForgeUpload" accept="image/*" onchange="uploadLogo('forge')" style="display: none;">
                            </div>
                            <button onclick="document.getElementById('logoForgeUpload').click()" class="upload-btn">
                                🖼️ Subir Logo Forge3D
                            </button>

                            <div class="logo-preview">
                                <img id="logoPreviewCompany" src="" alt="Logo Empresa" class="logo-preview-img">
                                <div class="logo-upload-overlay">
                                    <i class="fas fa-upload"></i>
                                    <span>Logo Empresa</span>
                                </div>
                                <input type="file" id="logoCompanyUpload" accept="image/*" onchange="uploadLogo('company')" style="display: none;">
                            </div>
                            <button onclick="document.getElementById('logoCompanyUpload').click()" class="upload-btn">
                                🏢 Subir Logo Empresa
                            </button>
                        </div>
                    </div>

                    <!-- Colores de marca -->
                    <div class="branding-group">
                        <h4><i class="fas fa-palette"></i> Colores de Marca</h4>
                        <div class="color-picker-grid">
                            <div class="color-picker-item">
                                <label for="brandingColorPrimary">Color Primario</label>
                                <div class="color-input-group">
                                    <input type="color" id="brandingColorPrimary" value="#CD9430" onchange="updateBrandingColors()" />
                                    <input type="text" id="brandingColorPrimaryText" value="#CD9430" onchange="updateBrandingColors()" />
                                </div>
                            </div>
                            <div class="color-picker-item">
                                <label for="brandingColorSecondary">Color Secundario</label>
                                <div class="color-input-group">
                                    <input type="color" id="brandingColorSecondary" value="#e1aa4a" onchange="updateBrandingColors()" />
                                    <input type="text" id="brandingColorSecondaryText" value="#e1aa4a" onchange="updateBrandingColors()" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Redes sociales -->
                    <div class="branding-group">
                        <h4><i class="fas fa-share-alt"></i> Redes Sociales</h4>
                        <div class="social-inputs-grid">
                            <div class="social-input-item">
                                <label><i class="fab fa-tiktok"></i> TikTok</label>
                                <input type="url" id="brandingSocialTiktok" placeholder="https://tiktok.com/@usuario" onchange="updateBranding()" />
                            </div>
                            <div class="social-input-item">
                                <label><i class="fab fa-instagram"></i> Instagram</label>
                                <input type="url" id="brandingSocialInstagram" placeholder="https://instagram.com/usuario" onchange="updateBranding()" />
                            </div>
                            <div class="social-input-item">
                                <label><i class="fab fa-youtube"></i> YouTube</label>
                                <input type="url" id="brandingSocialYoutube" placeholder="https://youtube.com/@usuario" onchange="updateBranding()" />
                            </div>
                            <div class="social-input-item">
                                <label><i class="fab fa-linkedin"></i> LinkedIn</label>
                                <input type="url" id="brandingSocialLinkedin" placeholder="https://linkedin.com/company/empresa" onchange="updateBranding()" />
                            </div>
                            <div class="social-input-item">
                                <label><i class="fab fa-facebook"></i> Facebook</label>
                                <input type="url" id="brandingSocialFacebook" placeholder="https://facebook.com/usuario" onchange="updateBranding()" />
                            </div>
                            <div class="social-input-item">
                                <label><i class="fab fa-whatsapp"></i> WhatsApp</label>
                                <input type="url" id="brandingSocialWhatsapp" placeholder="https://wa.me/1234567890" onchange="updateBranding()" />
                            </div>
                        </div>
                    </div>

                    <!-- Opciones de personalización -->
                    <div class="branding-group">
                        <h4><i class="fas fa-sliders-h"></i> Personalización</h4>
                        <div class="customization-options">
                            <label class="checkbox-item">
                                <input type="checkbox" id="brandingShowCompanyInfo" checked onchange="updateBranding()" />
                                <span>Mostrar información de empresa</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="brandingShowSocialLinks" checked onchange="updateBranding()" />
                                <span>Mostrar enlaces sociales</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="brandingShowBrandingFooter" checked onchange="updateBranding()" />
                                <span>Mostrar footer de branding</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="brandingShowForge3DLogo" checked onchange="updateBranding()" />
                                <span>Mostrar logo Forge3D</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="brandingAllowThemeToggle" checked onchange="updateBranding()" />
                                <span>Permitir cambio de tema</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="config-actions">
                <div class="action-group" id="cotizador-actions">
                    <button onclick="restaurarConfiguracion()" class="action-btn secondary">🔄 Restaurar</button>
                    <button onclick="exportarConfiguracion()" class="action-btn">📤 Exportar</button>
                    <input type="file" id="importConfig" accept=".json" style="display: none;" onchange="importarConfiguracion()" />
                    <button onclick="document.getElementById('importConfig').click()" class="action-btn">📥 Importar</button>
                </div>

                <div class="action-group" id="branding-actions" style="display: none;">
                    <button onclick="resetBranding()" class="action-btn secondary">🔄 Resetear Marca</button>
                    <button onclick="exportBranding()" class="action-btn">📤 Exportar Marca</button>
                    <input type="file" id="importBranding" accept=".json" style="display: none;" onchange="importBranding()" />
                    <button onclick="document.getElementById('importBranding').click()" class="action-btn">📥 Importar Marca</button>
                </div>
            </div>
        </div>

        <!-- Contenido Principal -->
        <div class="main-content" id="mainContent">
            <div class="header">
                <div class="logos-container">
                    <img id="forge-logo" src="https://bio.goldtech.mx/forge3d_oscuro" alt="Forge3D Logo" class="logo-forge" loading="lazy">
                </div>
                <h1>
                    <span class="title-cotizador company-name">Cotizador</span>
                </h1>
            </div>

            <div class="form-section">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nombrePieza">
                            <i class="fas fa-cube"></i> Nombre de la pieza
                            <span class="tooltip-icon" data-tooltip="nombre descriptivo de la pieza a imprimir ayuda a identificarla en la cotización">ℹ️</span>
                        </label>
                        <input type="text" id="nombrePieza" placeholder="Ej: Llavero personalizado" />
                    </div>

                    <div class="form-group">
                        <label for="cantidad">
                            <i class="fas fa-hashtag"></i> Cantidad de piezas
                            <span class="tooltip-icon" data-tooltip="número de piezas idénticas a imprimir afecta el costo total y puede activar descuentos por volumen">ℹ️</span>
                        </label>
                        <input type="number" id="cantidad" placeholder="Ej: 5" min="1" value="1" />
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-clock"></i> Tiempo de impresión
                        <span class="tooltip-icon" data-tooltip="tiempo total estimado de impresión incluye todas las capas y movimientos de la impresora">ℹ️</span>
                    </label>
                    <div class="time-inputs">
                        <div class="time-group">
                            <label>Horas</label>
                            <input type="number" id="horas" placeholder="0" min="0" max="999" value="0" oninput="actualizarTiempoTotal()" />
                        </div>
                        <span class="time-separator">:</span>
                        <div class="time-group">
                            <label>Minutos</label>
                            <input type="number" id="minutos" placeholder="0" min="0" max="59" value="0" oninput="actualizarTiempoTotal()" />
                        </div>
                        <span class="time-separator">:</span>
                        <div class="time-group">
                            <label>Segundos</label>
                            <input type="number" id="segundos" placeholder="0" min="0" max="59" value="0" oninput="actualizarTiempoTotal()" />
                        </div>
                    </div>
                    <div class="time-display" id="tiempoTotal">
                        Tiempo total: 0h 0m 0s (0.00 horas)
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="unidadMaterial">
                            <i class="fas fa-ruler"></i> Unidad de medida del material
                            <span class="tooltip-icon" data-tooltip="elige si quieres especificar el material en metros lineales o peso en gramos">ℹ️</span>
                        </label>
                        <select id="unidadMaterial" onchange="cambiarUnidadMaterial()">
                            <option value="metros">📏 Metros</option>
                            <option value="gramos">⚖️ Gramos</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="cantidadMaterial" id="labelCantidadMaterial">
                            <i class="fas fa-weight-hanging"></i> <span id="labelTexto">Metros estimados a usar</span>
                            <span class="tooltip-icon" data-tooltip="cantidad de filamento necesario se convertirá automáticamente según el tipo de material seleccionado">ℹ️</span>
                        </label>
                        <input type="number" id="cantidadMaterial" placeholder="Ej: 30" min="0" step="0.1" />
                        <div class="conversion-display" id="conversionDisplay" style="display: none;"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tipoFilamento">
                            <i class="fas fa-industry"></i> Tipo de filamento
                            <span class="tooltip-icon" data-tooltip="tipo de material a usar cada material tiene diferente densidad que afecta el cálculo peso-volumen">ℹ️</span>
                        </label>
                        <select id="tipoFilamento" onchange="actualizarDensidad()">
                            <option value="1.24">PLA (1.24 g/cm³)</option>
                            <option value="1.25">PLA+ (1.25 g/cm³)</option>
                            <option value="1.35">PLA Fibra de Carbono (1.35 g/cm³)</option>
                            <option value="1.27">ABS (1.27 g/cm³)</option>
                            <option value="1.23">PETG (1.23 g/cm³)</option>
                            <option value="1.20">TPU Flexible (1.20 g/cm³)</option>
                            <option value="1.44">ASA (1.44 g/cm³)</option>
                            <option value="1.15">WOOD (1.15 g/cm³)</option>
                            <option value="personalizado">🔧 Personalizado</option>
                        </select>
                        <div id="densidadPersonalizada" style="display: none; margin-top: 0.5rem;">
                            <input type="number" id="densidadCustom" placeholder="Densidad (g/cm³)" min="0.5" max="3.0" step="0.01" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="porcentajeDesperdicio">
                            <i class="fas fa-recycle"></i> Desperdicio (%)
                            <span class="tooltip-icon" data-tooltip="porcentaje extra de filamento considerado por desperdicios soportes purga y fallos típicamente 5-15%">ℹ️</span>
                        </label>
                        <input type="number" id="porcentajeDesperdicio" value="10" step="1" min="0" max="50" />
                        <div class="quick-options">
                            <button onclick="aplicarValorRapido('porcentajeDesperdicio', 5)" class="quick-btn">Mínimo (5)</button>
                            <button onclick="aplicarValorRapido('porcentajeDesperdicio', 10)" class="quick-btn">Normal (10)</button>
                            <button onclick="aplicarValorRapido('porcentajeDesperdicio', 15)" class="quick-btn">Alto (15)</button>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="impresora">
                            <i class="fas fa-print"></i> Impresora (Consumo automático)
                            <span class="tooltip-icon" data-tooltip="selecciona tu modelo de impresora para aplicar automáticamente su consumo eléctrico">ℹ️</span>
                        </label>
                        <select id="impresora" onchange="aplicarConsumoImpresora()">
                            <option value="manual">🔧 Manual</option>
                            <option value="120">Creality K1C (120W) ⭐</option>
                            <option value="350">Creality K1 Max (350W)</option>
                            <option value="85">Creality Ender 3 V2 (85W)</option>
                            <option value="110">Creality Ender 3 S1 (110W)</option>
                            <option value="80">Prusa i3 MK3S+ (80W)</option>
                            <option value="350">Bambu Lab X1 Carbon (350W)</option>
                            <option value="250">Bambu Lab A1 mini (250W)</option>
                            <option value="300">Bambu Lab P1P (300W)</option>
                            <option value="95">Artillery Sidewinder X2 (95W)</option>
                            <option value="140">Anycubic Kobra 2 (140W)</option>
                            <option value="160">FlashForge Creator Pro (160W)</option>
                            <option value="200">Raise3D E2 (200W)</option>
                            <option value="270">Qidi Tech X-Max 3 (270W)</option>
                        </select>
                        <div class="quick-options">
                            <button onclick="aplicarOpcionRapida('impresora', 120)" class="quick-btn">K1C (120W)</button>
                            <button onclick="aplicarOpcionRapida('impresora', 250)" class="quick-btn">A1 mini (250W)</button>
                            <button onclick="aplicarOpcionRapida('impresora', 350)" class="quick-btn">X1 Carbon (350W)</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="watts">
                            <i class="fas fa-bolt"></i> Consumo de la impresora (Watts)
                            <span class="tooltip-icon" data-tooltip="consumo eléctrico de la impresora durante la impresión se usa para calcular el costo de electricidad">ℹ️</span>
                        </label>
                        <input type="number" id="watts" placeholder="Ej: 120" min="0" />
                        <div class="quick-options">
                            <button onclick="aplicarValorRapido('watts', 80)" class="quick-btn">Básica (80W)</button>
                            <button onclick="aplicarValorRapido('watts', 120)" class="quick-btn">Estándar (120W)</button>
                            <button onclick="aplicarValorRapido('watts', 250)" class="quick-btn">Avanzada (250W)</button>
                            <button onclick="aplicarValorRapido('watts', 350)" class="quick-btn">Industrial (350W)</button>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="costoCarrete">
                            <i class="fas fa-dollar-sign"></i> Costo total del carrete (MXN)
                            <span class="tooltip-icon" data-tooltip="precio que pagaste por el carrete completo de 1kg de filamento incluyendo iva">ℹ️</span>
                        </label>
                        <input type="number" id="costoCarrete" placeholder="Ej: 500" min="0" step="0.01" />
                        <div class="quick-options">
                            <button onclick="aplicarValorRapido('costoCarrete', 350)" class="quick-btn">Económico (350)</button>
                            <button onclick="aplicarValorRapido('costoCarrete', 500)" class="quick-btn">Estándar (500)</button>
                            <button onclick="aplicarValorRapido('costoCarrete', 750)" class="quick-btn">Premium (750)</button>
                            <button onclick="aplicarValorRapido('costoCarrete', 1200)" class="quick-btn">Especialidad (1200)</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="costoExtra">
                            <i class="fas fa-wrench"></i> Otros costos (postprocesado, empaque, etc.)
                            <span class="tooltip-icon" data-tooltip="costos adicionales como lijado pintura, accesorios, programación, etc">ℹ️</span>
                        </label>
                        <input type="number" id="costoExtra" placeholder="Ej: 20" min="0" step="0.01" />
                        <div class="quick-options">
                            <button onclick="aplicarValorRapido('costoExtra', 0)" class="quick-btn">Sin extras (0)</button>
                            <button onclick="aplicarValorRapido('costoExtra', 20)" class="quick-btn">Básico (20)</button>
                            <button onclick="aplicarValorRapido('costoExtra', 50)" class="quick-btn">Completo (50)</button>
                        </div>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="comisionMarketplace">
                        <i class="fas fa-store"></i> Comisión marketplace (%)
                        <span class="tooltip-icon" data-tooltip="porcentaje que cobra la plataforma de venta por cada transacción se aplica sobre el precio final">ℹ️</span>
                    </label>
                    <select id="comisionMarketplace" onchange="manejarComisionMarketplace()">
                        <option value="0">🏪 Venta directa (0%)</option>
                        <option value="3.48">💳 PayPal/Stripe (3% + IVA = 3.48%)</option>
                        <option value="5.8">🛒 Tienda propia + PayPal (5% + IVA = 5.8%)</option>
                        <option value="9.28">🌐 Shopify + procesamiento (8% + IVA = 9.28%)</option>
                        <option value="13.92">📦 Amazon México (12% + IVA = 13.92%)</option>
                        <option value="17.4" selected>🟡 MercadoLibre Básico (15% + IVA = 17.4%)</option>
                        <option value="20.88">🟡 MercadoLibre + Publicidad (18% + IVA = 20.88%)</option>
                        <option value="25.52">🟡 MercadoLibre Full Service (22% + IVA = 25.52%)</option>
                        <option value="29">🟡 MercadoLibre Premium (25% + IVA = 29%)</option>
                        <option value="personalizada">🔧 Personalizada</option>
                    </select>
                    <div class="quick-options">
                        <button onclick="aplicarOpcionRapida('comisionMarketplace', 0)" class="quick-btn">Directo (0%)</button>
                        <button onclick="aplicarOpcionRapida('comisionMarketplace', 17.4)" class="quick-btn">ML Básico (17.4%)</button>
                        <button onclick="aplicarOpcionRapida('comisionMarketplace', 25.52)" class="quick-btn">ML Full (25.52%)</button>
                        <button onclick="aplicarOpcionRapida('comisionMarketplace', 3.48)" class="quick-btn">PayPal (3.48%)</button>
                    </div>

                    <div id="comisionPersonalizada" style="display: none; margin-top: 1rem;">
                        <label for="comisionCustom">
                            <i class="fas fa-percentage"></i> Comisión personalizada (%)
                        </label>
                        <input type="number" id="comisionCustom" placeholder="Ej: 10" min="0" max="50" step="0.1" />
                    </div>
                </div>

                <button onclick="agregarPieza()">➕ Agregar pieza a la cotización</button>

                <div class="preset-buttons">
                    <small style="color: var(--text-secondary); width: 100%; text-align: center; margin-bottom: 0.5rem;">⚡ Presets rápidos:</small>
                    <button class="preset-btn tooltip" onclick="aplicarPresetRapido('miniatura')">
                        📸 Miniatura
                        <span class="tooltiptext">1.5h, 15g - Ideal para llaveros y figuritas</span>
                    </button>
                    <button class="preset-btn tooltip" onclick="aplicarPresetRapido('decorativo')">
                        🎨 Decorativo
                        <span class="tooltiptext">4h, 50g - Perfecto para objetos ornamentales</span>
                    </button>
                    <button class="preset-btn tooltip" onclick="aplicarPresetRapido('funcional')">
                        🔧 Funcional
                        <span class="tooltiptext">8h, 120g - Herramientas y piezas útiles</span>
                    </button>
                    <button class="preset-btn tooltip" onclick="aplicarPresetRapido('prototipo')">
                        🚀 Prototipo
                        <span class="tooltiptext">12.5h, 200g - Proyectos complejos</span>
                    </button>
                </div>
            </div>

            <div class="tabla-resultados" id="tablaResultados" style="display:none;">
                <h2>🧾 Resumen de Cotización</h2>
                <table id="resumenTabla">
                    <thead>
                        <tr>
                            <th>Pieza</th>
                            <th>Cantidad</th>
                            <th>Tiempo</th>
                            <th>Material</th>
                            <th>Unitario (MXN)</th>
                            <th>Total (MXN)</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

                <div class="total-section">
                    <div class="total-amount">
                        Total General: $<span id="totalGeneral">0.00</span> MXN
                    </div>
                    <div class="button-group">
                        <button onclick="generarPDF()">📄 Descargar PDF</button>
                        <button onclick="limpiarTabla()" style="background: #6b7280;">🗑️ Limpiar Todo</button>
                    </div>
                </div>
            </div>
             
            <footer class="company-info">
                <p>⚠️ Los precios aquí calculados son estimaciones y pueden cambiar sin previo aviso.</p>
                <p>🚚 No se incluye costo de entrega y/o envío. Los precios son únicamente por las piezas impresas.</p>
                <p>💵 Todos los precios están expresados en pesos mexicanos y no incluyen IVA.</p>
                <div class="footer-brand branding-footer">
                    <a href="https://goldtech.mx" target="_blank" class="company-website">
                        <img id="company-footer-logo" src="https://bio.goldtech.mx/logogoldtech" alt="GoldTech MX Logo" loading="lazy">
                    </a>
                </div>
                <div class="social-icons">
                    <a href="https://tiktok.com/@goldtechmx" target="_blank" class="tiktok" title="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="https://instagram.com/goldtechmx" target="_blank" class="instagram" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://youtube.com/@goldtechmx" target="_blank" class="youtube" title="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://linkedin.com/company/goldtechmx" target="_blank" class="linkedin" title="LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://facebook.com/goldtechmx" target="_blank" class="facebook" title="Facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                </div>
            </footer>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="./assets/js/config.js"></script>
    <script src="./assets/js/app.js"></script>
=======
    <!-- Loader inicial -->
    <div id="loader" class="loader">
        <div class="loader-content">
            <img src="https://bio.goldtech.mx/forge3d_oscuro" alt="Forge3D" class="loader-logo">
            <div class="loader-spinner"></div>
            <p>Cargando Forge3D...</p>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <img id="forge-logo" src="https://bio.goldtech.mx/forge3d_oscuro" alt="Forge3D Logo" class="logo forge-logo">
                    <div class="app-info">
                        <h1 id="app-name">Cotizador Forge3D</h1>
                        <p id="app-subtitle">Calculadora Profesional de Precios</p>
                    </div>
                </div>

                <div class="header-controls">
                    <button class="control-btn" onclick="createSupportEmail()" title="Email de Soporte">
                        📧 Soporte
                    </button>

                    <button class="control-btn" onclick="createContactEmail()" title="Email de Contacto">
                        💬 Contacto
                    </button>

                    <button class="control-btn theme-toggle" onclick="toggleTheme()" title="Cambiar Tema (Ctrl+T)">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>

                    <button class="control-btn config-toggle" onclick="toggleSidebar()" title="Configuración (Ctrl+K)">
                        <i class="fas fa-cog"></i>
                    </button>

                    <button class="control-btn branding-toggle" onclick="BrandingUI.open()" title="Configurar Branding (Ctrl+B)">
                        <i class="fas fa-palette"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Contenido principal -->
        <main class="main-content">
            <div class="calculator-container">
                <!-- Formulario principal -->
                <div class="calculator-form">
                    <h2>📋 Datos de la Pieza</h2>

                    <form id="pieceForm" onsubmit="return false;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombrePieza">
                                    <i class="fas fa-tag"></i> Nombre de la pieza *
                                </label>
                                <input type="text" id="nombrePieza" placeholder="Ej: Engranaje personalizado" required>
                            </div>

                            <div class="form-group">
                                <label for="cantidad">
                                    <i class="fas fa-clone"></i> Cantidad *
                                </label>
                                <input type="number" id="cantidad" min="1" value="1" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="horas">
                                    <i class="fas fa-clock"></i> Tiempo de impresión *
                                </label>
                                <div class="time-inputs">
                                    <input type="number" id="horas" min="0" max="999" placeholder="H" title="Horas">
                                    <span>:</span>
                                    <input type="number" id="minutos" min="0" max="59" placeholder="M" title="Minutos">
                                    <span>:</span>
                                    <input type="number" id="segundos" min="0" max="59" placeholder="S" title="Segundos">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="unidadMaterial">
                                    <i class="fas fa-ruler"></i> Unidad de material
                                </label>
                                <select id="unidadMaterial" onchange="updateMaterialLabel()">
                                    <option value="metros">Metros de filamento</option>
                                    <option value="gramos">Gramos de material</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="cantidadMaterial">
                                    <i class="fas fa-weight-hanging"></i> <span id="materialLabel">Metros de filamento *</span>
                                </label>
                                <input type="number" id="cantidadMaterial" step="0.01" min="0" placeholder="Ej: 15.5" required>
                            </div>

                            <div class="form-group">
                                <label for="tipoFilamento">
                                    <i class="fas fa-industry"></i> Tipo de filamento *
                                </label>
                                <select id="tipoFilamento" required>
                                    <option value="">Seleccionar material</option>
                                    <option value="PLA">PLA (1.24 g/cm³)</option>
                                    <option value="ABS">ABS (1.04 g/cm³)</option>
                                    <option value="PETG">PETG (1.27 g/cm³)</option>
                                    <option value="TPU">TPU (1.20 g/cm³)</option>
                                    <option value="ASA">ASA (1.05 g/cm³)</option>
                                    <option value="HIPS">HIPS (1.04 g/cm³)</option>
                                    <option value="PC">PC - Policarbonato (1.20 g/cm³)</option>
                                    <option value="NYLON">Nylon (1.14 g/cm³)</option>
                                    <option value="WOOD">Filamento de Madera (1.28 g/cm³)</option>
                                    <option value="CARBON">Fibra de Carbono (1.30 g/cm³)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="impresora">
                                    <i class="fas fa-print"></i> Modelo de impresora *
                                </label>
                                <select id="impresora" required>
                                    <option value="">Seleccionar impresora</option>
                                    <option value="ENDER3">Creality Ender 3 (220W)</option>
                                    <option value="ENDER3V2">Creality Ender 3 V2 (230W)</option>
                                    <option value="ENDER5">Creality Ender 5 (220W)</option>
                                    <option value="CR10">Creality CR-10 (300W)</option>
                                    <option value="PRUSA_I3">Prusa i3 MK3S+ (120W)</option>
                                    <option value="PRUSA_MINI">Prusa MINI+ (120W)</option>
                                    <option value="BAMBU_A1">Bambu Lab A1 (350W)</option>
                                    <option value="BAMBU_X1">Bambu Lab X1 Carbon (350W)</option>
                                    <option value="ULTIMAKER_S3">Ultimaker S3 (215W)</option>
                                    <option value="ULTIMAKER_S5">Ultimaker S5 (500W)</option>
                                    <option value="FORMLABS_3">Formlabs Form 3 (65W)</option>
                                    <option value="ANYCUBIC_MEGA">Anycubic i3 Mega (270W)</option>
                                    <option value="GENERIC_FDM">Impresora FDM Genérica (250W)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="costoCarrete">
                                    <i class="fas fa-dollar-sign"></i> Costo del carrete (MXN) *
                                </label>
                                <input type="number" id="costoCarrete" step="0.01" min="0" placeholder="Ej: 450.00" required>
                            </div>
                        </div>

                        <!-- Marketplace opcional -->
                        <div class="form-row marketplace-section">
                            <div class="form-group">
                                <label for="marketplace">
                                    <i class="fas fa-store"></i> Marketplace (opcional)
                                </label>
                                <select id="marketplace">
                                    <option value="">Sin marketplace</option>
                                    <option value="MERCADOLIBRE">MercadoLibre (13-17%)</option>
                                    <option value="AMAZON">Amazon (8-15%)</option>
                                    <option value="ETSY">Etsy (6.5%)</option>
                                    <option value="FACEBOOK">Facebook Marketplace (5%)</option>
                                    <option value="CUSTOM">Personalizado</option>
                                </select>
                            </div>

                            <div class="form-group" id="comisionPersonalizadaGroup" style="display: none;">
                                <label for="comisionPersonalizada">
                                    <i class="fas fa-percentage"></i> Comisión personalizada (%)
                                </label>
                                <input type="number" id="comisionPersonalizada" step="0.1" min="0" max="50" placeholder="Ej: 10.5">
                            </div>
                        </div>

                        <!-- Botones de acción -->
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="clearForm()" title="Limpiar formulario (Ctrl+L)">
                                <i class="fas fa-eraser"></i> Limpiar
                            </button>

                            <button type="button" class="btn-primary" onclick="addPiece()" title="Agregar pieza (Ctrl+Enter)">
                                <i class="fas fa-plus"></i> Agregar Pieza
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Resultados -->
                <div class="results-container" id="tablaResultados" style="display: none;">
                    <div class="results-header">
                        <h2>📊 Resumen de Cotización</h2>
                        <div class="results-actions">
                            <button class="btn-info" onclick="showQuotePreview()" title="Vista previa">
                                <i class="fas fa-eye"></i> Vista Previa
                            </button>
                            <button class="btn-success" onclick="generatePDF()" title="Generar PDF (Ctrl+P)">
                                <i class="fas fa-file-pdf"></i> Generar PDF
                            </button>
                            <button class="btn-warning" onclick="clearAllPieces()" title="Limpiar todo">
                                <i class="fas fa-trash"></i> Limpiar Todo
                            </button>
                        </div>
                    </div>

                    <div class="pieces-table-container">
                        <table class="pieces-table">
                            <thead>
                                <tr>
                                    <th>Pieza</th>
                                    <th>Cantidad</th>
                                    <th>Material</th>
                                    <th>Tiempo</th>
                                    <th>Precio Unit.</th>
                                    <th>Total</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tablaPiezas">
                                <!-- Las piezas se cargan dinámicamente aquí -->
                            </tbody>
                        </table>
                    </div>

                    <div class="totals-summary">
                        <div class="totals-grid">
                            <div class="total-item">
                                <span class="total-label">Subtotal:</span>
                                <span class="total-value" id="subtotalFinal">$0.00</span>
                            </div>
                            <div class="total-item">
                                <span class="total-label">Comisión Marketplace:</span>
                                <span class="total-value" id="comisionTotal">$0.00</span>
                            </div>
                            <div class="total-item total-main">
                                <span class="total-label">Total Final:</span>
                                <span class="total-value" id="totalFinal">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Sidebar de configuración -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-cog"></i> Configuración</h3>
                <button class="sidebar-close" onclick="toggleSidebar()">×</button>
            </div>

            <div class="sidebar-content">
                <div class="config-tabs">
                    <button class="config-tab active" onclick="switchConfigTab('general')">⚙️ General</button>
                    <button class="config-tab" onclick="switchConfigTab('advanced')">🔧 Avanzado</button>
                    <button class="config-tab" onclick="switchConfigTab('backup')">💾 Backup</button>
                </div>

                <!-- Tab General -->
                <div id="configGeneral" class="config-section active">
                    <h4>💰 Configuración de Costos</h4>

                    <div class="config-group">
                        <label for="tarifaElectrica">
                            <i class="fas fa-bolt"></i> Tarifa eléctrica (MXN/kWh):
                        </label>
                        <input type="number" id="tarifaElectrica" step="0.01" min="0">
                        <small>Costo de electricidad por kilovatio-hora</small>
                    </div>

                    <div class="config-group">
                        <label for="tarifaHora">
                            <i class="fas fa-clock"></i> Tarifa por hora (MXN):
                        </label>
                        <input type="number" id="tarifaHora" step="0.01" min="0">
                        <small>Valor de tu trabajo por hora</small>
                    </div>

                    <div class="config-group">
                        <label for="porcentajeUtilidad">
                            <i class="fas fa-percentage"></i> Porcentaje de utilidad (%):
                        </label>
                        <input type="number" id="porcentajeUtilidad" step="0.1" min="0" max="100">
                        <small>Margen de ganancia sobre costos</small>
                    </div>

                    <div class="config-group">
                        <label for="desgasteMaquina">
                            <i class="fas fa-tools"></i> Desgaste de máquina (MXN/h):
                        </label>
                        <input type="number" id="desgasteMaquina" step="0.01" min="0">
                        <small>Costo de mantenimiento por hora de uso</small>
                    </div>

                    <div class="config-group">
                        <label for="desgasteCarrete">
                            <i class="fas fa-recycle"></i> Desgaste de carrete (%):
                        </label>
                        <input type="number" id="desgasteCarrete" step="0.1" min="0" max="100">
                        <small>Porcentaje de desperdicio de material</small>
                    </div>
                </div>

                <!-- Tab Avanzado -->
                <div id="configAdvanced" class="config-section">
                    <h4>🔧 Configuración Avanzada</h4>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableNotifications">
                            Habilitar notificaciones
                        </label>
                    </div>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableAutoSave">
                            Guardado automático
                        </label>
                    </div>

                    <div class="config-group">
                        <label>
                            <input type="checkbox" id="enableDebugMode">
                            Modo depuración
                        </label>
                    </div>

                    <div class="config-group">
                        <label for="defaultCurrency">
                            <i class="fas fa-money-bill"></i> Moneda por defecto:
                        </label>
                        <select id="defaultCurrency">
                            <option value="MXN">MXN - Peso Mexicano</option>
                            <option value="USD">USD - Dólar Americano</option>
                            <option value="EUR">EUR - Euro</option>
                        </select>
                    </div>

                    <div class="config-group">
                        <label for="decimalPlaces">
                            <i class="fas fa-calculator"></i> Decimales en precios:
                        </label>
                        <select id="decimalPlaces">
                            <option value="0">0 decimales</option>
                            <option value="1">1 decimal</option>
                            <option value="2">2 decimales</option>
                        </select>
                    </div>
                </div>

                <!-- Tab Backup -->
                <div id="configBackup" class="config-section">
                    <h4>💾 Backup y Restauración</h4>

                    <div class="config-group">
                        <button class="btn-secondary full-width" onclick="exportConfiguration()">
                            <i class="fas fa-download"></i> Exportar Configuración
                        </button>
                        <small>Descargar configuración actual</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-secondary full-width" onclick="document.getElementById('importConfig').click()">
                            <i class="fas fa-upload"></i> Importar Configuración
                        </button>
                        <input type="file" id="importConfig" accept=".json" style="display: none" onchange="importConfiguration(this)">
                        <small>Cargar configuración desde archivo</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-warning full-width" onclick="resetToDefaults()">
                            <i class="fas fa-redo"></i> Restaurar Valores por Defecto
                        </button>
                        <small>Volver a la configuración original</small>
                    </div>

                    <div class="config-group">
                        <button class="btn-info full-width" onclick="clearAllData()">
                            <i class="fas fa-trash-alt"></i> Limpiar Todos los Datos
                        </button>
                        <small>Eliminar toda la configuración guardada</small>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="btn-primary full-width" onclick="saveConfiguration()">
                    <i class="fas fa-save"></i> Guardar Configuración
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p id="welcome-message">🚚 No se incluye costo de entrega y/o envío. Los precios son únicamente por las piezas impresas.</p>
                <p>💵 Todos los precios están expresados en pesos mexicanos y no incluyen IVA.</p>
                <div class="footer-brand branding-footer">
                    <a href="https://goldtech.mx" target="_blank" class="company-website">
                        <img id="company-footer-logo" src="https://bio.goldtech.mx/logogoldtech" alt="GoldTech MX Logo" loading="lazy" class="company-logo">
                    </a>
                </div>
                <div class="social-icons">
                    <!-- Los enlaces se cargan dinámicamente desde branding -->
                </div>
                <p id="footer-text" class="footer-text">Desarrollado con ❤️ por GoldTech MX</p>
            </div>
        </footer>
    </div>

    <!-- Overlay para modales -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;"></div>

    <!-- Notificaciones -->
    <div id="notifications-container" class="notifications-container"></div>

    <!-- Scripts principales -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="./assets/js/branding_config.js"></script>
    <script src="./assets/js/whatsapp_floating.js"></script>
    <script src="./assets/js/email_templates.js"></script>
    <script src="./assets/js/branding_ui.js"></script>
    <script src="./assets/js/app.js"></script>

    <!-- Service Worker para PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('SW registrado: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registro falló: ', registrationError);
                    });
            });
        }
    </script>

    <!-- Script de inicialización -->
    <script>
        // Inicialización de la aplicación
        document.addEventListener('DOMContentLoaded', function () {
            // Ocultar loader
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if (loader) {
                    loader.style.display = 'none';
                }
            }, 1000);

            // Inicializar configuración
            loadConfiguration();

            // Detectar tema del sistema
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-theme');
                updateThemeIcon();
            }

            // Escuchar cambios de tema del sistema
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!localStorage.getItem('theme-preference')) {
                    document.body.classList.toggle('dark-theme', e.matches);
                    updateThemeIcon();
                }
            });

            // Configurar marketplace
            document.getElementById('marketplace').addEventListener('change', function () {
                const customGroup = document.getElementById('comisionPersonalizadaGroup');
                if (this.value === 'CUSTOM') {
                    customGroup.style.display = 'block';
                } else {
                    customGroup.style.display = 'none';
                }
            });

            console.log('🚀 Forge3D Cotizador v2.1 inicializado correctamente');
        });

        // Funciones globales para compatibilidad
        function updateMaterialLabel() {
            const unidad = document.getElementById('unidadMaterial').value;
            const label = document.getElementById('materialLabel');
            label.textContent = unidad === 'metros' ? 'Metros de filamento *' : 'Gramos de material *';
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme-preference', isDark ? 'dark' : 'light');
            updateThemeIcon();

            // Actualizar logos según el tema
            if (typeof brandingManager !== 'undefined') {
                brandingManager.updateLogos();
            }
        }

        function updateThemeIcon() {
            const icon = document.getElementById('theme-icon');
            const isDark = document.body.classList.contains('dark-theme');
            icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        function switchConfigTab(tabName) {
            // Remover active de todos los tabs
            document.querySelectorAll('.config-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.config-section').forEach(section => section.classList.remove('active'));

            // Activar tab seleccionado
            document.querySelector(`[onclick="switchConfigTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`config${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`).classList.add('active');
        }

        // Atajos de teclado
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                addPiece();
            }
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                clearForm();
            }
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                if (document.getElementById('tablaResultados').style.display !== 'none') {
                    generatePDF();
                }
            }
            if (e.ctrlKey && e.key === 't') {
                e.preventDefault();
                toggleTheme();
            }
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                toggleSidebar();
            }
            if (e.ctrlKey && e.key === 'b') {
                e.preventDefault();
                BrandingUI.open();
            }
            if (e.key === 'Escape') {
                // Cerrar modales abiertos
                if (document.getElementById('sidebar').classList.contains('open')) {
                    toggleSidebar();
                }
                if (brandingUI && brandingUI.isOpen) {
                    BrandingUI.close();
                }
                // Cerrar modal de email si está abierto
                const emailModal = document.querySelector('.email-modal');
                if (emailModal) {
                    closeEmailModal();
                }
            }
        });
    </script>
>>>>>>> be363583fdcff963d0d4d544ac9db7e88cc74d65
</body>
</html>
